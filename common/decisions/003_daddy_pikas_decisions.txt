change_government_celestial = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_celestial
    desc = change_govt_celestial_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        # CRITICAL FIX MISSING: You must add 'is_player = yes' here for visibility.
        NOT = { has_government = celestial_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        # Custom mod effect to clean up landless status (requires third-party mod)
        tgp_wipe_domicile_effect = yes 

		if = {
			limit = { NOT = { has_domicile = yes } }
			give_noble_family_title = {
				name = noble_family_name
				tier = county # Warning: This tier is likely incorrect for Noble Family Titles
				article = DEFAULT_TITLE_NAME_ARTICLE
				government = celestial_government # Target government
			}
			domicile ?= {
				set_domicile_type = east_asian_estate
				set_up_domicile_estate_effect = yes
			}
		}
        # Change player's government
		change_government = celestial_government

        # WARNING: This mass converts holdings and is highly disruptive/game-breaking
		every_sub_realm_county = {
			title_province = { set_holding_type = city_holding } 
		}

        # Change vassals' government
		every_vassal_or_below = {
			change_government = celestial_government
		}
    }
    ai_check_interval = 0
    ai_will_do = 0
}

change_government_mandala = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_mandala
    desc = change_govt_mandala_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        # CRITICAL FIX MISSING: You must add 'is_player = yes' here for visibility.
        NOT = { has_government = mandala_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        # Custom mod effect to clean up landless status (requires third-party mod)
        tgp_wipe_domicile_effect = yes 

		if = {
			limit = { NOT = { has_domicile = yes } }
			give_noble_family_title = {
				name = noble_family_name
				tier = county # Warning: This tier is likely incorrect for Noble Family Titles
				article = DEFAULT_TITLE_NAME_ARTICLE
				government = mandala_government # Target government
			}
			domicile ?= {
				set_domicile_type = east_asian_estate
				set_up_domicile_estate_effect = yes
			}
		}
        # Change player's government
		change_government = mandala_government

        # WARNING: This mass converts holdings and is highly disruptive/game-breaking
		every_sub_realm_county = {
			title_province = { set_holding_type = city_holding } 
		}

        # Change vassals' government
		every_vassal_or_below = {
			change_government = mandala_government
		}
    }
    ai_check_interval = 0
    ai_will_do = 0
}

change_government_wanua = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_wanua
    desc = change_govt_wanua_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        # CRITICAL FIX MISSING: You must add 'is_player = yes' here for visibility.
        NOT = { has_government = wanua_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        # Custom mod effect to clean up landless status (requires third-party mod)
        tgp_wipe_domicile_effect = yes 

		if = {
			limit = { NOT = { has_domicile = yes } }
			give_noble_family_title = {
				name = noble_family_name
				tier = county # Warning: This tier is likely incorrect for Noble Family Titles
				article = DEFAULT_TITLE_NAME_ARTICLE
				government = wanua_government # Target government
			}
			domicile ?= {
				set_domicile_type = east_asian_estate
				set_up_domicile_estate_effect = yes
			}
		}
        # Change player's government
		change_government = wanua_government

        # WARNING: This mass converts holdings and is highly disruptive/game-breaking
		every_sub_realm_county = {
			title_province = { set_holding_type = city_holding } 
		}

        # Change vassals' government
		every_vassal_or_below = {
			change_government = wanua_government
		}
    }
    ai_check_interval = 0
    ai_will_do = 0
}

change_government_feudal = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_feudal
    desc = change_govt_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOT = { has_government = feudal_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        change_government = feudal_government
        every_sub_realm_county = {
			title_province = {
				set_holding_type = castle_holding
			}
		}
        every_vassal_or_below = {
			change_government = feudal_government
		}
    }
    ai_check_interval = 0

    ai_will_do = 0
}

change_government_meritocratic = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_meritocratic
    desc = change_govt_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOT = { has_government = meritocratic_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        tgp_wipe_domicile_effect = yes
		if = {
			limit = { NOT = { has_domicile = yes } }
			give_noble_family_title = {
				name = noble_family_name
				tier = county
				article = DEFAULT_TITLE_NAME_ARTICLE
				government = meritocratic_government
			}
			domicile ?= {
				set_domicile_type = east_asian_estate
				set_up_domicile_estate_effect = yes
			}
		}
		change_government = meritocratic_government
		every_sub_realm_county = {
			title_province = { set_holding_type = city_holding }
		}
		every_vassal_or_below = {
			change_government = meritocratic_government
		}
    }
    ai_check_interval = 0
    ai_will_do = 0
}

change_government_clan = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_clan
    desc = change_govt_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOT = { has_government = clan_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        change_government = clan_government
        every_sub_realm_county = {
			title_province = {
				set_holding_type = castle_holding
			}
		}
        every_vassal_or_below = {
			change_government = clan_government
		}
    }
    ai_check_interval = 0

    ai_will_do = 0
}

change_govt_tribe = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_tribe
    desc = change_govt_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOT = { has_government = tribal_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        change_government = tribal_government
        every_sub_realm_county = {
			title_province = {
				set_holding_type = tribal_holding
			}
		}
        every_vassal_or_below = {
			change_government = tribal_government
		}
    }
    ai_check_interval = 0

    ai_will_do = 0
}

change_govt_nomad = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_govt_nomad
    desc = change_govt_desc
    selection_tooltip = change_govt_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOT = { has_government = nomad_government }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        change_government = nomad_government
        every_sub_realm_county = {
			title_province = {
				set_holding_type = nomad_holding
			}
		}
        every_vassal_or_below = {
			change_government = nomad_government
		}
    }
    ai_check_interval = 0

    ai_will_do = 0
}

change_government_administrative = {
	picture = { reference = "gfx/interface/illustrations/decisions/cheat_tab.dds" }

	title = change_govt_administrative
	desc = change_govt_desc
	selection_tooltip = change_govt_tt
	confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

	is_shown = {
		NOT = { has_government = administrative_government }   # ← 修正拼写
		has_character_flag = daddy_pika_cheat_menu
		has_character_flag = govt_menu
	}

	effect = {
		tgp_wipe_domicile_effect = yes
		if = {
			limit = { NOT = { has_domicile = yes } }
			give_noble_family_title = {
				name = noble_family_name
				tier = county
				article = DEFAULT_TITLE_NAME_ARTICLE
				government = administrative_government
			}
			domicile ?= {
				set_domicile_type = east_asian_estate
				set_up_domicile_estate_effect = yes
			}
		}
		change_government = administrative_government
		every_sub_realm_county = {
			title_province = { set_holding_type = castle_holding }
		}
		every_vassal_or_below = {
			change_government = administrative_government
		}
	}

	ai_check_interval = 0
	ai_will_do = 0
}

change_government_landless_adventurer = {
	picture = { reference = "gfx/interface/illustrations/decisions/cheat_tab.dds" }

	title = change_govt_landless_adventurer
	desc = change_govt_desc
	selection_tooltip = change_govt_tt
	confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

	is_shown = {
		has_character_flag = daddy_pika_cheat_menu
		has_character_flag = govt_menu
	}

	effect = {
		create_landless_adventurer_title_tooltip_effect = yes
		trigger_event = { id = ep3_laamps.0030 }
		change_government = landless_adventurer_government
	}

	ai_check_interval = 0
	ai_will_do = 0
}

change_succession_single = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_suc_old
    desc = change_suc_desc
    selection_tooltip = change_suc_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOR = {
            has_government = theocracy_government
            has_government = republic_government
            has_government = mercenary_government
            has_government = tribal_government
            has_government = clan_government
            has_government = landless_adventurer_government
            has_government = nomad_government
        }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        add_realm_law_skip_effects = single_heir_succession_law
        root.culture = {
            add_innovation = innovation_primogeniture
        }
    }
    ai_check_interval = 0

    ai_will_do = 0
}

change_succession_single_youngest = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = change_suc_young
    desc = change_suc_desc
    selection_tooltip = change_suc_tt
    confirm_text = CONFIRM_OKAY

	decision_group_type = pcm

    is_shown = {
        NOR = {
            has_government = theocracy_government
            has_government = republic_government
            has_government = mercenary_government
            has_government = tribal_government
            has_government = clan_government
            has_government = landless_adventurer_government
            has_government = nomad_government
        }
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = govt_menu
    }

    effect = {
        add_realm_law_skip_effects = single_heir_succession_law_youngest
        root.culture = {
            add_innovation = innovation_primogeniture
        }
    }
    ai_check_interval = 0

    ai_will_do = 0
}

convert_religion = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = conv_realm_religion_tt
    desc = convert_realm_desc
    selection_tooltip = are_you_sure_tt
    confirm_text = "CONFIRM_OKAY"

	decision_group_type = pcm

    is_shown = {
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = covt_menu
    }

    effect = {
        every_realm_county = {
            set_county_faith = root.faith
        }
        every_vassal_or_below = {
            set_character_faith_with_conversion = root.faith
        }
    }

    ai_check_interval = 0
}

convert_culture = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = conv_realm_culture_tt
    desc = convert_realm_desc
    selection_tooltip = are_you_sure_tt
    confirm_text = "CONFIRM_OKAY"

	decision_group_type = pcm

    is_shown = {
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = covt_menu
    }

    effect = {
        every_realm_county = {
            set_county_culture = root.culture
        }
        every_vassal_or_below = {
            set_culture = root.culture
        }
    }

    ai_check_interval = 0
}

realm_control = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = max_realm_control_TT
    desc = max_realm_desc
    selection_tooltip = are_you_sure_tt
    confirm_text = "CONFIRM_OKAY"

	decision_group_type = pcm

    is_shown = {
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = covt_menu
    }

    effect = {
        every_realm_county = {
            change_county_control = 100
        }
    }

    ai_check_interval = 0
}

realm_development = {
    picture = {
		reference = "gfx/interface/illustrations/decisions/cheat_tab.dds"
	}

    title = max_realm_development_TT
    desc = max_realm_desc
    selection_tooltip = are_you_sure_tt
    confirm_text = "CONFIRM_OKAY"

	decision_group_type = pcm

    is_shown = {
        has_character_flag = daddy_pika_cheat_menu
        has_character_flag = covt_menu
    }

    effect = {
        every_realm_county = {
            change_development_level = 100
        }
    }

    ai_check_interval = 0
}
